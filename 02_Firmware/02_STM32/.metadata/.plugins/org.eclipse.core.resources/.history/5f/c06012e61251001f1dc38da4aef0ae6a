/*
 * esp32i2sComunicationDriver.h
 *
 *  Created on: Aug 2, 2024
 *      Author: dbank
 */

#ifndef SRC_ESP32I2SCOMUNICATIONDRIVER_H_
#define SRC_ESP32I2SCOMUNICATIONDRIVER_H_
#include "i2cEngine.h"
#include "queue.h"
#include "task.h"
#include "semphr.h"

class esp32_i2sComunicationDriver {
public:
	esp32_i2sComunicationDriver(i2cMaster* pointer_to_i2cMasterObject);
	virtual ~esp32_i2sComunicationDriver();
	HAL_StatusTypeDef ping(void);
	void incrementInterruptRequestCountingSemaphore(void); //metoda wywoływana podczas wykrycia sygnały interrupt request, aby inkrementować semafor zliczający wystąpienia
	static void intrrruptRequestCallback(void *pNothing);

protected:

private:
	i2cMaster* pi2cMaster;												//wskaźnik do obiektu obsługuj ącego komunikację stm'a32 jako i2c master
	SemaphoreHandle_t esp32IntrrruptRequest_CountingSemaphore;			//uchwyt semafora zliczającego ilość wsytąpień esp32 interrupt request i ilość odczytów danych z esp32
	const uint8_t esp32InterruptRequestCountingSemaphore_MAX = 21;
	const uint8_t esp32i2cSlaveAdress = I2C_SLAVE_ADDRESS_ESP32;		//7bit address
};

#endif /* SRC_ESP32I2SCOMUNICATIONDRIVER_H_ */
