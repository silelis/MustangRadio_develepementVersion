/*
 * esp32i2sComunicationDriver.h
 *
 *  Created on: Aug 2, 2024
 *      Author: dbank
 */

#ifndef SRC_ESP32I2SCOMUNICATIONDRIVER_H_
#define SRC_ESP32I2SCOMUNICATIONDRIVER_H_
#include "i2cEngine.h"
#include "queue.h"
#include "task.h"
#include "semphr.h"

class esp32_i2sComunicationDriver {
public:
	esp32_i2sComunicationDriver(i2cMaster* pointer_to_i2cMasterObject);
	virtual ~esp32_i2sComunicationDriver();
	HAL_StatusTypeDef ping(void);

protected:

private:
	i2cMaster* pi2cMaster;
	SemaphoreHandle_t esp32IntrrruptRequest_CountingSemaphore;
	const uint8_t esp32InterruptRequestCountingSemaphore_MAX = 21;
	const uint8_t esp32i2cSlaveAdress = I2C_SLAVE_ADDRESS_ESP32;		//7bit address
	//friend BaseType_t xSemaphoreGiveFromISR( xSemaphore, pxHigherPriorityTaskWoken );
	friend BaseType_tBaseType_t SemaphoreGiveFromISR( QueueHandle_t xQueue, BaseType_t * const pxHigherPriorityTaskWoken )
};

#endif /* SRC_ESP32I2SCOMUNICATIONDRIVER_H_ */
