/*
 * i2cEngine.h
 *
 *  Created on: Jul 21, 2024
 *      Author: dbank
 */

#ifndef INC_I2CENGINE_H_
#define INC_I2CENGINE_H_

#include "i2c.h"
#include "printfRedirect.h"
#include "FreeRTOS.h"
#include "queue.h"
#include "task.h"
#include "semphr.h"
#include "i2c_slave_master_queueClass.h"

class i2cMaster {
public:
	i2cMaster(I2C_HandleTypeDef *hi2c1);
	virtual ~i2cMaster();
	HAL_StatusTypeDef ping(uint16_t DevAddress_7bit);
	i2cTraRecQueue4DynamicData* pQueueReceiveObject;

protected:
	BaseType_t i2cSemaphoreTake(void);
	BaseType_t i2cSemaphoreGive(void);

private:
	I2C_HandleTypeDef *p_hi2c1;
	const char *TAG = "I2C master log:";
	SemaphoreHandle_t handle_i2cBinarySemaphore;
	//const uint16_t blockingTime=300;
};

#endif /* INC_I2CENGINE_H_ */
