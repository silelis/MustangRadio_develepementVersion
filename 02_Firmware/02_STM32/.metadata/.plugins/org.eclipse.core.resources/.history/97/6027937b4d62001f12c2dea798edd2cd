#ifndef LIST_H
#define LIST_H

//#include <cstdint>
#include <stdint.h>
//#include <iostream>
//#include <cstring>
#include <string.h>
#include "SileliS_code/menuItem.h"

class List:protected menuItem {
public:
    // Konstruktor
    List(const char* nodeName, uint8_t execFunctionArraySize);

    // Destruktor
    ~List();

    // Dodawanie elementów do listy
    void addAtBeginning(const char* nodeName);
    void addAtEnd(const char* nodeName);

    // Poruszanie się po liście
    void resetToFirst();
    void moveToNext();
    uint8_t getCurrentNodeIndex() const;
    bool isAtEnd() const;

    // Usuwanie elementu z listy
    void removeElement(uint8_t indexToDelete);

    // Wydrukowanie elementów listy
    void printList() const;
    void printCurrent() const;

private:
    char* name;      // Nazwa węzła
    uint8_t index;   // Indeks węzła
    List* next;      // Wskaźnik do następnego elementu w liście
    static List* head;   // Wskaźnik do pierwszego elementu listy
    static List* current; // Wskaźnik do aktualnego elementu listy
    static uint8_t indexCounter; // Licznik indeksów

    // Prywatna funkcja do renumeracji węzłów
    void renumberNodes();

    // Prywatna funkcja do sprawdzania, czy można dodać element do listy
    bool canAddItem() const;

    // Prywatna funkcja do zwalniania pamięci
    void freeList();
    List* createNode(const char *nodeName);
};

#endif // LIST_H
