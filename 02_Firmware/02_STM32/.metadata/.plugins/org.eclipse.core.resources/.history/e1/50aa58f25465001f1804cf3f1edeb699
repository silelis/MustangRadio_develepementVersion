/*
 * radioMenu.cpp
 *
 *  Created on: Aug 25, 2024
 *      Author: dbank
 */

#include <SileliS_code/radioMenu.h>

radioMenu::radioMenu() {
	queueRadioMenuKbrd = nullptr;
	configASSERT(queueRadioMenuKbrd = xQueueCreate(20, sizeof(keyboardUnion)));

	this->createDeviceMenuList_periphery();
	this->createDeviceMenuList_audio();
}
void radioMenu::createDeviceMenuList_periphery(void){
	this->peripheryDevices = nullptr;
	assert(this->peripheryDevices = new myList("1st periph",3));
	this->peripheryDevices->addAtEnd("2nd periph",3);
	this->peripheryDevices->addAtEnd("3rd periph",3);

	this->peripheryDevices->resetToFirst();
	this->peripheryDevices->printList();
}
void radioMenu::createDeviceMenuList_audio(void){
	this->audioDevices=nullptr;
	assert(this->audioDevices = new myList("1st audio",5));
	this->audioDevices->addAtEnd("2nd audio",5);
	this->audioDevices->addAtEnd("3rd audio",5);

	this->audioDevices->moveToEnd();
	this->audioDevices->moveToNextInLoop();
	this->audioDevices->printList();

	this->setCurrentDeviceMenu_audio();
	this->curretDevice->printCurrent();
}

void radioMenu::setCurrentDeviceMenu_audio(void){
	this->curretDevice=this->audioDevices;
}
BaseType_t radioMenu::queueRadioMenuKbrdSend(const void * kbrdUnionSend){
	return xQueueSend(this->queueRadioMenuKbrd, kbrdUnionSend, pdMS_TO_TICKS(700));
}

BaseType_t radioMenu::queueRadioMenuKbrdReceive(keyboardUnion* kbrdUnionReceived){
	return xQueueReceive(this->queueRadioMenuKbrd, kbrdUnionReceived, portMAX_DELAY);
}

radioMenu::~radioMenu() {
		//vTaskDelete(this->taskHandle_manageTheRadioManue);
		vQueueDelete(queueRadioMenuKbrd);

		delete [] this->radioMainMenu;
		delete [] this->audioDevices;
		delete [] this->peripheryDevices;
		this->curretDevice=nullptr;
}

